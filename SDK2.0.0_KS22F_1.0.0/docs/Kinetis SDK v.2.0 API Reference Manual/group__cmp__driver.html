<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.2.0 API Reference Manual: CMP Peripheral driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.2.0 API Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__cmp__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">CMP Peripheral driver<div class="ingroups"><a class="el" href="group__cmp.html">Analog Comparator (CMP)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This section describes the programming interface of the CMP Peripheral driver.</p>
<h1>Overview</h1>
<p>The CMP driver is a basic comparator with advanced features. The APIs for the basic comparator enable the CMP as a general comparator, which compares the two voltage of the two input channels and creates the output of the comparator result. The APIs for advanced features can be used as the plug-in function based on the basic comparator. They can process the comparator's output with hardware support.</p>
<h1><a class="anchor" id="CMPFunGrps"></a>
Function groups</h1>
<h2><a class="anchor" id="CMPInit"></a>
Initialization</h2>
<p>This function group initializes the default configuration structure for the comparator, enable/disable the CMP module, initialize the CMP module with the basic configuration, and de-initialize it. Also the function to set the input channels is also included in this group.</p>
<h2><a class="anchor" id="CMPAdvFeature"></a>
Advanced Feature</h2>
<p>This function group configures the advanced features of the CMP.</p>
<h2><a class="anchor" id="CMPResults"></a>
Results</h2>
<p>This function group is for the operations to get the comparator's status.</p>
<h1><a class="anchor" id="CMPTpyUC"></a>
Typical use case</h1>
<h2><a class="anchor" id="CMPPolConfig"></a>
Polling Configuration</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__cmp.html#structcmp__config__t">cmp_config_t</a> mCmpConfigStruct;</div>
<div class="line">    <a class="code" href="group__cmp.html#structcmp__dac__config__t">cmp_dac_config_t</a> mCmpDacConfigStruct;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configures the comparator.</span></div>
<div class="line">    <a class="code" href="group__cmp.html#ga6f62245ac63801ce51bfaf9188c9bc99">CMP_Init</a>(DEMO_CMP_INSTANCE);</div>
<div class="line">    <a class="code" href="group__cmp.html#gae3f987e58dece632e66665514c01e109">CMP_GetDefaultConfig</a>(&amp;mCmpConfigStruct);</div>
<div class="line">    CMP_Configure(DEMO_CMP_INSTANCE, &amp;mCmpConfigStruct);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configures the DAC channel.</span></div>
<div class="line">    mCmpDacConfigStruct.<a class="code" href="group__cmp.html#ga01753d40f590d16345dd45abefb8bbe6">referenceVoltageSource</a> = <a class="code" href="group__cmp.html#gga2f0d85949fd79dbb3b10fa0fde34f329a4debdbdd1f9e6ade8b7ef646332251ca">kCMP_VrefSourceVin2</a>; <span class="comment">// VCC.</span></div>
<div class="line">    mCmpDacConfigStruct.<a class="code" href="group__cmp.html#gaa44061486be24d6276a2aae0283c8153">DACValue</a> = 32U; <span class="comment">// Half voltage of logic high level.</span></div>
<div class="line">    <a class="code" href="group__cmp.html#ga61434c1828d7ef35a349eef6ec37d0c2">CMP_SetDACConfig</a>(DEMO_CMP_INSTANCE, &amp;mCmpDacConfigStruct);</div>
<div class="line">    <a class="code" href="group__cmp.html#ga7021cf6a3df2d233781d9763d4562260">CMP_SetInputChannels</a>(DEMO_CMP_INSTANCE, DEMO_CMP_USER_CHANNEL, DEMO_CMP_DAC_CHANNEL);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (1)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (0U != (<a class="code" href="group__cmp.html#gga948ec869580a67bebaff6f2e0f3e42c8a9b4382c01c2497d4a8510fe8cd009def">kCMP_OutputAssertEventFlag</a> &amp; <a class="code" href="group__cmp.html#ga383d33c2a6b879aabfe2e5edf283ee3a">CMP_GetStatusFlags</a>(DEMO_CMP_INSTANCE)))</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Do something.</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Do something.</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="CMPIntConfig"></a>
Interrupt Configuration</h2>
<div class="fragment"><div class="line"><span class="keyword">volatile</span> uint32_t g_CmpFlags = 0U;</div>
<div class="line"></div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> DEMO_CMP_IRQ_HANDLER_FUNC(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    g_CmpFlags = <a class="code" href="group__cmp.html#ga383d33c2a6b879aabfe2e5edf283ee3a">CMP_GetStatusFlags</a>(DEMO_CMP_INSTANCE);</div>
<div class="line">    <a class="code" href="group__cmp.html#gae9ff11446780bc7a7e76a66660a5072a">CMP_ClearStatusFlags</a>(DEMO_CMP_INSTANCE, <a class="code" href="group__cmp.html#gga948ec869580a67bebaff6f2e0f3e42c8aa646eb5f296db0906e89322ca6ec0da1">kCMP_OutputRisingEventFlag</a> | <a class="code" href="group__cmp.html#gga948ec869580a67bebaff6f2e0f3e42c8a1c9bd8b6e0825ad465a47c60a3dad473">kCMP_OutputFallingEventFlag</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (0U != (g_CmpFlags &amp; <a class="code" href="group__cmp.html#gga948ec869580a67bebaff6f2e0f3e42c8aa646eb5f296db0906e89322ca6ec0da1">kCMP_OutputRisingEventFlag</a>))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do something.</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (0U != (g_CmpFlags &amp; <a class="code" href="group__cmp.html#gga948ec869580a67bebaff6f2e0f3e42c8a1c9bd8b6e0825ad465a47c60a3dad473">kCMP_OutputFallingEventFlag</a>))</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Do something.</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__cmp.html#structcmp__config__t">cmp_config_t</a> mCmpConfigStruct;</div>
<div class="line">    <a class="code" href="group__cmp.html#structcmp__dac__config__t">cmp_dac_config_t</a> mCmpDacConfigStruct;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <a class="code" href="group__ksdk__common.html#gafa528dfdcd79df34a9af1d1156431f16">EnableIRQ</a>(DEMO_CMP_IRQ_ID);        </div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configures the comparator.</span></div>
<div class="line">    <a class="code" href="group__cmp.html#ga6f62245ac63801ce51bfaf9188c9bc99">CMP_Init</a>(DEMO_CMP_INSTANCE);</div>
<div class="line">    <a class="code" href="group__cmp.html#gae3f987e58dece632e66665514c01e109">CMP_GetDefaultConfig</a>(&amp;mCmpConfigStruct);</div>
<div class="line">    CMP_Configure(DEMO_CMP_INSTANCE, &amp;mCmpConfigStruct);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Configures the DAC channel.</span></div>
<div class="line">    mCmpDacConfigStruct.<a class="code" href="group__cmp.html#ga01753d40f590d16345dd45abefb8bbe6">referenceVoltageSource</a> = <a class="code" href="group__cmp.html#gga2f0d85949fd79dbb3b10fa0fde34f329a4debdbdd1f9e6ade8b7ef646332251ca">kCMP_VrefSourceVin2</a>; <span class="comment">// VCC.</span></div>
<div class="line">    mCmpDacConfigStruct.<a class="code" href="group__cmp.html#gaa44061486be24d6276a2aae0283c8153">DACValue</a> = 32U; <span class="comment">// Half voltage of logic high level.</span></div>
<div class="line">    <a class="code" href="group__cmp.html#ga61434c1828d7ef35a349eef6ec37d0c2">CMP_SetDACConfig</a>(DEMO_CMP_INSTANCE, &amp;mCmpDacConfigStruct);</div>
<div class="line">    <a class="code" href="group__cmp.html#ga7021cf6a3df2d233781d9763d4562260">CMP_SetInputChannels</a>(DEMO_CMP_INSTANCE, DEMO_CMP_USER_CHANNEL, DEMO_CMP_DAC_CHANNEL);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Enables the output rising and falling interrupts.</span></div>
<div class="line">    <a class="code" href="group__cmp.html#ga9e7dc0f35a19a4b10894d0eca547befb">CMP_EnableInterrupts</a>(DEMO_CMP_INSTANCE, <a class="code" href="group__cmp.html#gga985bb411310dc841bb432072599dceb5a0ff51a957f1d4f252f6857731c0b5ca1">kCMP_OutputRisingInterruptEnable</a> | <a class="code" href="group__cmp.html#gga985bb411310dc841bb432072599dceb5a8976b76c2ef49c93106d9f561ca666d2">kCMP_OutputFallingInterruptEnable</a>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (1)</div>
<div class="line">    {</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Mon Dec 14 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
