<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Kinetis SDK v.2.0 API Reference Manual: peripheral driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fs_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis SDK v.2.0 API Reference Manual
   &#160;<span id="projectnumber">Rev. 0</span>
   </div>
   <div id="projectbrief">Freescale Semiconductor, Inc.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>API&#160;Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__flexio__camera__driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">peripheral driver<div class="ingroups"><a class="el" href="group__flexio__camera.html">Flexible I/O CAMERA (CAMERA)</a> &#124; <a class="el" href="group__flexio.html">Flexible I/O (FLEXIO)</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This section describes the programming interface of the flexio camera peripheral driver. The flexio driver configures CAMERA module, provide functional interface and EDMA transactional interface for user to build camera application</p>
<h1><a class="anchor" id="FLEXIO_CAMERAOvw"></a>
Overview</h1>
<p>FLEXIO CAMERA driver includes 2 parts: functional APIs and EDMA transactional APIs. Functional APIs are feature/property target low level APIs. User can use functional APIs for FLEXIO CAMERA initialization/configuration/operation purpose. Using the functional API require user get konwledge of the FLEXIO CAMERA peripheral and know how to organize functional APIs to meet the requirement of application. All functional API use the <a class="el" href="group__flexio__camera.html#structFLEXIO__CAMERA__Type" title="Define structure of configuring the FlexIO camera device. ">FLEXIO_CAMERA_Type</a> * as the first parameter. FLEXIO CAMERA functional operation groups provide the functional APIs set.</p>
<p>EDMA transactional APIs are transaction target high level APIs. User can use the transactional API to enable the peripheral quickly and can also use in the application if the code size and performance of transactional APIs can satisfy requirement. If the code size and performance are critical requirement, user can refer to the transactional API implementation and write their own code. All transactional APIs use the flexio_camera_edma_handle_t as the second parameter and user need to initialize the handle by calling <a class="el" href="group__flexio__camera.html#ga0a1435c25e2a11164eddf46aa221fc81" title="Init the CAMERA handle which is used in transcational functions. ">FLEXIO_CAMERA_CreateHandleEDMA()</a> API.</p>
<p>EDMA transactional APIs support asynchronized receive. It means, the functions <a class="el" href="group__flexio__camera.html#ga3e0164f4adb081f3d7b2b546044aad76" title="Receive data using EDMA. ">FLEXIO_CAMERA_ReceiveEDMA()</a> setup interrupt for data receive, when the receive complete, upper layer is notified through callback function with status kStatus_FLEXIO_CAMERA_RxIdle.</p>
<h1><a class="anchor" id="FLEXIO_CAMERAFunc"></a>
Function groups</h1>
<h2><a class="anchor" id="FLEXIO_CAMERAInit"></a>
Initialization and deinitialization</h2>
<p>The function <a class="el" href="group__flexio__camera.html#ga673dbe9cee73c1bc18a48d4903ae0d0f" title="Ungate the FLEXIO clock, reset the FLEXIO module and do FLEXIO CAMERA hardware configuration. ">FLEXIO_CAMERA_Init()</a> initializes FLEXIO_CAMERA with specified configurations, the function <a class="el" href="group__flexio__camera.html#ga802016ccb9ed8299101f66455b85d7db" title="Get the default configuration to configure FLEXIO CAMERA. ">FLEXIO_CAMERA_GetDefaultConfig()</a> could help to get the default configurations.</p>
<h2><a class="anchor" id="FLEXIO_CAMERAStatus"></a>
Status</h2>
<p>Provide functions to get and clear the FLEXIO CAMERA status.</p>
<h2><a class="anchor" id="FLEXIO_CAMERAInterrupt"></a>
Interrupt</h2>
<p>Provide functions to enable/disable FLEXIO CAMERA interrupts and get current enabled interrupts.</p>
<h2><a class="anchor" id="FLEXIO_CAMERADmaCtrl"></a>
DMA Control</h2>
<p>Provide functions to enable/disable FLEXIO CAMERA to generate DMA request.</p>
<h2><a class="anchor" id="FLEXIO_CAMERABusOperation"></a>
Bus Operations</h2>
<p>Provide functions to enable/disable TX/RX and functions to write/read data.</p>
<h2><a class="anchor" id="FLEXIO_CAMERATrans"></a>
Transactional</h2>
<p>Provide functions to receive data through interrupt or DMA.</p>
<h1><a class="anchor" id="FLEXIO_CAMERACase"></a>
Typical use case</h1>
<h2><a class="anchor" id="CAMERACasePolling"></a>
FLEXIO CAMERA Receive in EDMA way</h2>
<div class="fragment"><div class="line"><span class="keyword">volatile</span> uint32_t isEDMAGetOnePictureFinish = <span class="keyword">false</span>;</div>
<div class="line"><a class="code" href="group__edma__driver.html#structedma__handle__t">edma_handle_t</a> g_edmaHandle;</div>
<div class="line">flexio_camera_edma_handle_t g_cameraEdmaHandle;   </div>
<div class="line"><a class="code" href="group__edma__driver.html#structedma__config__t">edma_config_t</a> edmaConfig;</div>
<div class="line"><a class="code" href="group__flexio__camera.html#structFLEXIO__CAMERA__Type">FLEXIO_CAMERA_Type</a> g_FlexioCameraDevice = {.<a class="code" href="group__flexio__camera.html#ae0f8a4522f24e49f4b07d817cd83bc9d">flexioBase</a> = FLEXIO0,</div>
<div class="line">                                       .datPinStartIdx = 24U, <span class="comment">/* fxio_pin 24 -31 are used. </span></div>
<div class="line"><span class="comment">                                       .pclkPinIdx = 1U,      /* fxio_pin 1 is used as pclk pin. </span></div>
<div class="line"><span class="comment">                                       .hrefPinIdx = 18U,     /* flexio_pin 18 is used as href pin. </span></div>
<div class="line"><span class="comment">                                       .shifterStartIdx = 0U, /* Shifter 0 = 7 are used. </span></div>
<div class="line"><span class="comment">                                       .shifterCount = 8U,</span></div>
<div class="line"><span class="comment">                                       .timerIdx = 0U};</span></div>
<div class="line"><span class="comment">flexio_camera_config_t cameraConfig;</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">/* Configure DMAMUX </span></div>
<div class="line"><span class="comment">DMAMUX_Init(DMAMUX0);</span></div>
<div class="line"><span class="comment">/* Configure DMA </span></div>
<div class="line"><span class="comment">EDMA_GetDefaultConfig(&amp;edmaConfig);</span></div>
<div class="line"><span class="comment">EDMA_Init(DMA0, &amp;edmaConfig);</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">DMAMUX_SetSource(DMAMUX0, DMA_CHN_FLEXIO_TO_FRAMEBUFF, (g_FlexioCameraDevice.shifterStartIdx + 1U));</span></div>
<div class="line"><span class="comment">DMAMUX_EnableChannel(DMAMUX0, DMA_CHN_FLEXIO_TO_FRAMEBUFF);</span></div>
<div class="line"><span class="comment">EDMA_CreateHandle(&amp;g_edmaHandle, DMA0, DMA_CHN_FLEXIO_TO_FRAMEBUFF);</span></div>
<div class="line"><span class="comment"></span></div>
<div class="line"><span class="comment">FLEXIO_CAMERA_GetDefaultConfig(&amp;cameraConfig);</span></div>
<div class="line"><span class="comment">FLEXIO_CAMERA_Init(&amp;g_FlexioCameraDevice, &amp;cameraConfig);</span></div>
<div class="line"><span class="comment">/* Clear all the flag. </span></div>
<div class="line"><span class="comment">FLEXIO_CAMERA_ClearStatusFlags(&amp;g_FlexioCameraDevice,</span></div>
<div class="line"><span class="comment">                               kFLEXIO_CAMERA_RxDataRegFullFlag | kFLEXIO_CAMERA_RxErrorFlag);</span></div>
<div class="line"><span class="comment">FLEXIO_ClearTimerStatusFlags(FLEXIO0, 0xFF);</span></div>
<div class="line"><span class="comment">FLEXIO_CAMERA_CreateHandleEDMA(&amp;g_FlexioCameraDevice, &amp;g_cameraEdmaHandle, FLEXIO_CAMERA_UserCallback, NULL,</span></div>
<div class="line"><span class="comment">                               &amp;g_edmaHandle);</span></div>
<div class="line"><span class="comment">cameraTransfer.dataAddress = (uint32_t)u16CameraFrameBuffer;</span></div>
<div class="line"><span class="comment">cameraTransfer.dataNum = sizeof(u16CameraFrameBuffer);</span></div>
<div class="line"><span class="comment">FLEXIO_CAMERA_ReceiveEDMA(&amp;g_FlexioCameraDevice, &amp;g_cameraEdmaHandle, &amp;cameraTransfer);</span></div>
<div class="line"><span class="comment">while (!(isEDMAGetOnePictureFinish))</span></div>
<div class="line"><span class="comment">{</span></div>
<div class="line"><span class="comment">    ;</span></div>
<div class="line"><span class="comment">}</span></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul class="foot">
    <li class="footer">Mon Dec 14 2015 &copy; 2015 Freescale Semiconductor, Inc. All rights reserved.
    </li>
  </ul>
</div>
</body>
</html>
